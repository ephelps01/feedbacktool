# Read Me

Make sure you have run migrations after install and you have the laravel auth scaffolding generated or this package will not work!

## Config File

The config file is inside of the controllers folder, configure this before using the package as it requires variables
such as your GitLab API URl and access tokens. When creating your access token, grant 'API' access.

File Path: `ecd\feedbacktool\src\config.php`

(Make sure to run migrations)


____________________________________________________________________________________________________________________________________________________________


## Creating an Issue
What data to POST:

The controller accepts the following input names:
- 'title'
- 'description'
- 'label'

Which are all required.
POST this data to `/issue` route.

When an issue is created, so is an entry to the `issues` table. This holds the `issue_id` generated by GitLab, a `user_id` identifying the user that
created the issue and a boolean value of `active` determening whether the issue is closed/open.

When specifying what labels the user can add to an issue, make sure that the corresponding labels are created within GitLab too.


____________________________________________________________________________________________________________________________________________________________


## GitLab Response Data

The following data values are returned by GitLab:
- `id`
- `iid`
- `project_id`
- `title`
- `description`
- `state`
- `created_at`
- `updated_at`
- `labels` (Array)
- `milestone`
- `assignees` (Array)
- `author`
- `assignee`
- `user_notes_count`
- `upvotes`
- `downvotes`
- `due_date`
- `confidential` (Boolean)
- `web_url`


____________________________________________________________________________________________________________________________________________________________


## Scheduled Tasks
## This package comes with scheduled tasks located here: `ecd\feedbacktool\src\console\Kernel.php`

These scheduled tasks are run `daily` by default checking for updates on issues which updated the
`issues` table and creates records in the `gitnotifications` table.

You may change the frequency but be aware that disabling any of the jobs may limit functionality of
this package.


____________________________________________________________________________________________________________________________________________________________


## Getting/Posting Data

To wrap up, here is the data that you can GET:
- Issue Information
- Issue Comments

Here is the data that you can POST:
- Issue Information


## Posting (Creating a New Issue)

You must post the following data (names are sensitive) to this route: /issue
- title
- description
- label

All three are required or they will return an error.
(They are also case sensitive)


## Getting Issue Data

Make a GET request to this route: /issue

It will return a variable: `$issues` by default.
In your view you may display the data shown in the (GitLab Response Data) section above ^


## Getting Issues Notes

Make a GET request to this route: /issue/{id}/notes
Make sure that the issue id is present or the controller will not know what issues notes to get.

The controller will return a variable: `$issueNotes` by default.

*To return data on it's own or format it as JSON, see the Issues Controller located: `ecd\feedbacktool\src\controllers\IssuesController.php`*# feedbacktool
